# Schema to experiment with. This is a few types from the
# Language Server Protocol as it is not entirely trivial.

Position:
  line: integer
  character: integer

Range:
  start: Position
  end: Position

Location:
  uri: string
  range: Range

LocationLink:
  targetUri: string
  targetRange: Range
  targetSelectionRange: Range

Diagnostic:
  range: Range
  message: string

TextDocumentIdentifier:
  uri: string

TextDocumentItem:
  <:TextDocumentIdentifier
  languageId: string
  version: integer
  text: string

VersionedTextDocumentIdentifier:
  <:TextDocumentIdentifier
  version: integer

TextDocumentContentChangeEvent:
  range?: Range
  text: string

# -- Text document notifiations.
DidOpenTextDocumentParams:      # textDocument/didOpen
  textDocument: TextDocumentItem

DidChangeTextDocumentParams:    # textDocument/didChange
  textDocument: VersionedTextDocumentIdentifier
  contentChanges+: TextDocumentContentChangeEvent

DidSaveTextDocumentParams:      # textDocument/didSave
  textDocument: TextDocumentIdentifier

DidCloseTextDocumentParams:     # textDocument/didClose
  textDocument: TextDocumentIdentifier

# -- Code action
CodeActionParams:              # textDocument/codeAction
  #<:WorkDoneProgressParams,
  #<:PartialResultParams
  textDocument: TextDocumentIdentifier
  range: Range
  #context: CodeActionContext

CodeAction:  # Response to code action is either an array of these
  title: string
  #kind?: string   # Kind of change e.g quickfix, refactor, ...
  diagnostics+: Diagnostic
  isPreferred: boolean = false
  #edit?: WorkspaceEdit

# -- textDocument/publishDiagnostics
# This is a notification that is sent from the server to the client
PublishDiagnosticParams:
  uri: string
  diagnostics+: Diagnostic